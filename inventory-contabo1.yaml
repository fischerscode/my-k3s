all:
  vars:
    wireguard_interface: wg0
    users: # All (new) sudoers users
      - name: "maximilian"
        sshkeys: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDAJdTjFQ1rW9QYb1Vx9YYSTF/NNgcDX9dIM9hs86xQejyQ1Zz2KhDh2dBquVowHfjGWR1ENoawHR5X1oqBv4KlMBJKsg2oIU4SQ3DSojhPPf5yn+VmmN2zkVqHvP6hWi3xKk5wa+Lu70d4nvo56z2hxvmQZBp3y/UE0WLQLjmDHCLE7BfPsru8k6t4pN1wH9J5en+hsIUgmMH+ffhOORb95GYgxkREXGAancbSEFQmmIIhlJ0lPkBh85PQu7lBiRTMXf5pvZ5WxV19dre1b6QK5bbgC7iwOZdKYSHDO8lI9JRc0mWXiscdgLJGaDkFFsPMcVHOHNttnfzbk8OUdEmyubcEUfYBWixuQCgNpTlZoja29sk1LZ706cdrYz3WCiD6scNBT3CNV2HjGgRCi8e4S1TB6fAW5eUD82cRT7GnIENKfpknVtAyeqwklmEENCb/sB3wizeQgNUUTGdSZJ3/CHIYIVTWsssCb6LBIMz2flhLPb2G+2Lh7grc3G9GInMJEi5mHNaCqI8xGVO6FQ09E8CqI0p+Amg35DHKAHyrEBVMW8kFWwYOpd7GczYVjBtarQ8112nhiQm3Oz1t1yklLaGmUfi821WCfTyoYFPdXT06mSVwiREEkbvNaymDzc8/WPz08WOirraQwwWCp3cQabFm1PXjSdW0IRZdcTXTyQ== maximilian"
    REPOSITORY: "https://github.com/fischerscode/my-k3s"
  hosts:
    knode1:
      ansible_host: 93.104.211.224
      externalIPv4: 93.104.211.224
      internalIPv4: 10.1.0.1
      externalIPv6: 2a02:c205:3006:4151::1
      internalIPv6: fd4c:2bfb:09a3:9eb4::1
      root_password: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        62386235356337333736326166303364393564663936656139656634613636396166616435303639
        3939666632373939396465333034353439333633646233380a393535313063373863633430303638
        63663266333832346434363532313839383539376365613764643235663937336630316534373730
        3765633063346566360a336632666438656634363239363534336263643638666636613433363564
        3238
    knode2:
      ansible_host: 79.143.180.91
      externalIPv4: 79.143.180.91
      internalIPv4: 10.1.0.2
      externalIPv6: 2a02:c205:3006:4152::1
      internalIPv6: fd4c:2bfb:09a3:9eb4::2
      root_password: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        36356337323731646639613366613563343365326165356637616336663461373035376364646532
        3763646662306334633232616536623831633136656439660a323761636138346539626332356537
        62633832623632636438316238393532663466636562333137346239353865643964363637333533
        6235383366333062610a383234386230633232623430666536616532313833306465383634396435
        6632
    knode3:
      ansible_host: 178.238.224.202
      externalIPv4: 178.238.224.202
      internalIPv4: 10.1.0.3
      externalIPv6: 2a02:c205:3006:4153::1
      internalIPv6: fd4c:2bfb:09a3:9eb4::3
      root_password: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        63623536333932393766316531323039663763613862373733313635333866646564613833633031
        6162656134633537653730383466383335633732306230650a643661313163626535623666636634
        64393536613632636634666431373066303531373766303737346636373964313934653236396234
        3030383361623131320a373236356431623939313538316265366361396466643465316334356164
        6566
    knode4:
      ansible_host: 178.238.227.211
      externalIPv4: 178.238.227.211
      internalIPv4: 10.1.0.4
      externalIPv6: 2a02:c205:3006:4155::1
      internalIPv6: fd4c:2bfb:09a3:9eb4::4
      root_password: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        34373366353431633464613765653362316336636139346665356530353132396166396437383863
        3934643564653166306463346536656436386166326165620a393030363133343131303839626437
        32656663303831306236363433613466643066613937366566353561396137343365373634326666
        6539643662393764640a613936666461353834323335663438393339353333313939616235376436
        6239
    knode5:
      ansible_host: 178.238.227.183
      externalIPv4: 178.238.227.183
      internalIPv4: 10.1.0.5
      externalIPv6: 2a02:c205:3006:4156::1
      internalIPv6: fd4c:2bfb:09a3:9eb4::5
      root_password: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        36326262633866333936373266663036303331623162313538373862353439653134666534363261
        6565666564336437666339623235633338306633323065380a626434313165393732643264393233
        37323435613561666338323064653863316262643063323066333236393935363030326435613062
        3962326362666139610a363633383539353838636234643265363264373533663238663239383837
        6665
  children:
    k8s-cluster:
      children:
        kube-master:
          hosts: knode[1:3]
        kube-node:
          hosts: knode[4:5]
      vars:
        k3sToken: !vault | #The secret token used by k3s
          $ANSIBLE_VAULT;1.1;AES256
          30626562326137333733656439353239326565653637393161346430313563623237316435613439
          3564326564356438346666356138323237336435353138310a323638326661316366303736373730
          36616530623632306334326331313439636236636136663738343262383065646639393235393031
          3131333164633934300a346566353164343033386632333364623130323931376263653336666431
          64316632666338306236383131313164343538666232393337643235306338623964396332303663
          63636565343730333736396266343130366534383366636130336631383362366666633466646564
          64353139313337363361316336333562613763666636316262393961633937646638313135666633
          64333434396431336563373830666432616532326431626130383539613538616461383063343538
          32326331353036643034656239313830333165386163636162633235306463373339353632636633
          65316131643063633262313430353861303062323535386164323236316438613535396662613331
          653638633164616266393563623934666331
        kubernetes_api_public_address: 79.143.176.58 #The public IP of the load balanced api server
        node_network: 10.1.0.0/24 #The vpn network of the nodes
        cluster_cidr: 10.42.0.0/16 #Network CIDR to use for pod IPs
        service_cidr: 10.43.0.0/16 #Network CIDR to use for services IPs
        cluster_dns: 10.43.0.10 #Cluster IP for coredns service. Should be in your service_cidr range
        cluster_domain: "cluster.local" #Cluster Domain
    k8s-storage:
      hosts:
        knode1:
          storageDisk: sda4
        knode2:
          storageDisk: sda4
        knode3:
          storageDisk: sda4
        knode4:
          storageDisk: sda4
        knode5:
          storageDisk: sda4
    vpn:
      children:
        k8s-cluster:
      vars:
        wireguard_address_ipv4: "{{ internalIPv4 }}/32"
        wireguard_address_ipv6: "{{ internalIPv6 }}/128"
        wireguard_endpoint: "{{ externalIPv4 }}"
        wireguard_port: 51820
        wireguard_persistent_keepalive: "30"
    dns:
      hosts: knode[1:3]
